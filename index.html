<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Russ Zaliznyak">
<meta name="dcterms.date" content="2025-08-10">

<title>AB Testing is an Optimization Problem</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script><script src="index_files/libs/clipboard/clipboard.min.js"></script>
<script src="index_files/libs/quarto-html/quarto.js"></script>
<script src="index_files/libs/quarto-html/popper.min.js"></script>
<script src="index_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="index_files/libs/quarto-html/anchor.min.js"></script>
<link href="index_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="index_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="index_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="index_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="index_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>

<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>
<script type="text/javascript">
window.PlotlyConfig = {MathJaxConfig: 'local'};
if (window.MathJax && window.MathJax.Hub && window.MathJax.Hub.Config) {window.MathJax.Hub.Config({SVG: {font: "STIX-Web"}});}
if (typeof require !== 'undefined') {
require.undef("plotly");
requirejs.config({
    paths: {
        'plotly': ['https://cdn.plot.ly/plotly-2.12.1.min']
    }
});
require(['plotly'], function(Plotly) {
    window._Plotly = Plotly;
});
}
</script>


  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active" data-toc-expanded="99">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction">Introduction</a></li>
  <li><a href="#significance-testing" id="toc-significance-testing" class="nav-link" data-scroll-target="#significance-testing">Significance Testing</a>
  <ul class="collapse">
  <li><a href="#misaligned-goals" id="toc-misaligned-goals" class="nav-link" data-scroll-target="#misaligned-goals">Misaligned Goals</a></li>
  <li><a href="#misaligned-costs" id="toc-misaligned-costs" class="nav-link" data-scroll-target="#misaligned-costs">Misaligned Costs</a></li>
  </ul></li>
  <li><a href="#bayesian-testing" id="toc-bayesian-testing" class="nav-link" data-scroll-target="#bayesian-testing">Bayesian Testing</a>
  <ul class="collapse">
  <li><a href="#aligned-goals" id="toc-aligned-goals" class="nav-link" data-scroll-target="#aligned-goals">Aligned Goals</a></li>
  <li><a href="#aligned-costs" id="toc-aligned-costs" class="nav-link" data-scroll-target="#aligned-costs">Aligned Costs</a></li>
  </ul></li>
  <li><a href="#a-simulation-framework" id="toc-a-simulation-framework" class="nav-link" data-scroll-target="#a-simulation-framework">A Simulation Framework</a>
  <ul class="collapse">
  <li><a href="#experiment-design" id="toc-experiment-design" class="nav-link" data-scroll-target="#experiment-design">Experiment Design</a></li>
  <li><a href="#expected-effects" id="toc-expected-effects" class="nav-link" data-scroll-target="#expected-effects">Expected Effects</a></li>
  <li><a href="#candidate-risk-thresholds" id="toc-candidate-risk-thresholds" class="nav-link" data-scroll-target="#candidate-risk-thresholds">Candidate Risk Thresholds</a></li>
  <li><a href="#simulation-logic" id="toc-simulation-logic" class="nav-link" data-scroll-target="#simulation-logic">Simulation Logic</a></li>
  </ul></li>
  <li><a href="#results" id="toc-results" class="nav-link" data-scroll-target="#results">Results</a></li>
  </ul>
</nav>
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">AB Testing is an Optimization Problem</h1>
<p class="subtitle lead">A Bayesian Criterion for Stopping Experiments</p>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Russ Zaliznyak </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">August 10, 2025</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<section id="introduction" class="level1">
<h1>Introduction</h1>
<p>Significance testing, as traditionally applied in AB experiments, is often misaligned with business goals. While these statistical methods aim to minimize false positives, real business impact is frequently driven by avoiding false negatives — missed opportunities to create value.</p>
<p>Below I show why significance thresholds like α = 0.05 are arbitrary and distort decision-making. I introduce Bayesian testing as a more practical alternative, and demonstrate — through discussion and simulation — how it better supports value-driven experimentation.</p>
<p>By reframing AB testing around expected value and decision quality, I move beyond rigid thresholds toward practical impact — treating experimentation as an optimization problem, not just a statistical exercise.</p>
</section>
<section id="significance-testing" class="level1">
<h1>Significance Testing</h1>
<section id="misaligned-goals" class="level2">
<h2 class="anchored" data-anchor-id="misaligned-goals">Misaligned Goals</h2>
<p><strong>Significance Testing</strong> is designed to rigorously control the frequency of false positives. If you’re writing physics papers or claiming groundbreaking scientific discoveries, it’s the perfect tool.</p>
<p>In these fields, false positives are extremely costly — both reputationally and scientifically. That’s why physicists often require 5-sigma evidence — about a 1 in 3.5 million chance that the result is a fluke.</p>
<p>But significance testing says nothing about the most important business questions:</p>
<p>Which decision has the highest expected return — ending the test, running it longer, or taking action now?</p>
</section>
<section id="misaligned-costs" class="level2">
<h2 class="anchored" data-anchor-id="misaligned-costs">Misaligned Costs</h2>
<p>Most companies default to a significance threshold of <strong>α = 0.05</strong> and statistical power of <strong>1 – β = 0.80</strong>. In practical terms, that means the test is designed to avoid <strong>false positives</strong> four times more aggressively than <strong>false negatives</strong>.</p>
<p>But in most business settings, <strong>false positives aren’t that costly</strong>. We thought a new button color improved conversion — turns out it didn’t. <strong>So what?</strong> The variant was flat, not disastrous.</p>
<p>But missing a true winner? That’s a lost opportunity — and sometimes, <strong>a costly one</strong>.</p>
</section>
</section>
<section id="bayesian-testing" class="level1">
<h1>Bayesian Testing</h1>
<section id="aligned-goals" class="level2">
<h2 class="anchored" data-anchor-id="aligned-goals">Aligned Goals</h2>
<p>The moment you ask, “What’s the expected value of this decision?”, you’ve entered Bayesian territory. You stop obsessing over p-values and start focusing on the projected impact of your actions.</p>
<p>Bayesian testing isn’t a new set of formulas — it’s a philosophical shift. One that aligns statistical thinking with how businesses actually need to make decisions.</p>
</section>
<section id="aligned-costs" class="level2">
<h2 class="anchored" data-anchor-id="aligned-costs">Aligned Costs</h2>
<p>We abandon our obsession with p-values and statistical power by introducing the statistic <em>expected loss</em> as our stopping criterion.</p>
<p>Expected loss quantifies the risk of a bad decision as:</p>
<p><span class="math display">\[
\text{Expected Loss} = \Pr(\text{harm}) \times \mathbb{E}[\text{Magnitude of Harm}]
\]</span></p>
<p>This simple formula captures two critical ideas: - The <strong>likelihood</strong> of a harmful outcome, - And its <strong>average cost</strong> when it occurs.</p>
<p>Instead of asking, “Is this result statistically significant?”, we ask, “What’s the cost of making the wrong call?” Expected loss is denominated in the units of the underlying metric. For conversion rate, we will use <code>%</code>, which refers to <code>% pts</code>.</p>
</section>
</section>
<section id="a-simulation-framework" class="level1">
<h1>A Simulation Framework</h1>
<p>To evaluate these principles under real-world constraints—limited time, limited traffic, and the tradeoff between speed and confidence—I will simulate 10,000 randomized AB tests with equal allocation to control and treatment groups:</p>
<section id="experiment-design" class="level2">
<h2 class="anchored" data-anchor-id="experiment-design">Experiment Design</h2>
<p>Each of the 10,000 simulated experiments will span up to 20 days, with traffic split evenly between control and treatment groups. Each day, users are randomly assigned to a condition in a 50/50 ratio, and conversion outcomes are sampled using a binomial process. This introduces natural day-to-day variation, allowing the simulation to reflect how decisions evolve over time as new data accumulates.</p>
<table class="caption-top table">
<colgroup>
<col style="width: 20%">
<col style="width: 21%">
<col style="width: 18%">
<col style="width: 18%">
<col style="width: 21%">
</colgroup>
<thead>
<tr class="header">
<th>Min (Test Days)</th>
<th>Max (Test Days)</th>
<th>Max (Test N)</th>
<th>Post Test N</th>
<th>Conversion Rate</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>7</td>
<td>20</td>
<td>80,000</td>
<td>500,000</td>
<td>50%</td>
</tr>
</tbody>
</table>
<p>Although the <strong>Control</strong> group has a true conversion rate of 50%, observed results will fluctuate due to random chance — just as they would in a real-world test.</p>
</section>
<section id="expected-effects" class="level2">
<h2 class="anchored" data-anchor-id="expected-effects">Expected Effects</h2>
<p>Each of the 10,000 simulated experiments draws a random treatment effect from the distribution shown below — a normal distribution centered at 100 with a standard error of 0.25. This models the natural variability in real-world experiments, where most effects are small, large lifts are uncommon, and we never know the complete truth.</p>
<p>Just like the control group varies due to sampling, a treatment programmed to be better (ITC &gt; 100) may still underperform or overperform in any given simulation.</p>
<div id="4e780476" class="cell" data-execution_count="1">
<div class="cell-output cell-output-display">
<div>                            <div id="b9f75495-b0d9-43f7-8402-46c98b8fbe34" class="plotly-graph-div" style="height:525px; width:100%;"></div>            <script type="text/javascript">                require(["plotly"], function(Plotly) {                    window.PLOTLYENV=window.PLOTLYENV || {};                                    if (document.getElementById("b9f75495-b0d9-43f7-8402-46c98b8fbe34")) {                    Plotly.newPlot(                        "b9f75495-b0d9-43f7-8402-46c98b8fbe34",                        [{"hoverinfo":"skip","hovertext":["Pr( True Effect > 98.977) = 100.00%","Pr( True Effect > 98.986) = 100.00%","Pr( True Effect > 98.995) = 100.00%","Pr( True Effect > 99.003) = 100.00%","Pr( True Effect > 99.012) = 100.00%","Pr( True Effect > 99.02) = 100.00%","Pr( True Effect > 99.029) = 100.00%","Pr( True Effect > 99.037) = 100.00%","Pr( True Effect > 99.046) = 99.99%","Pr( True Effect > 99.054) = 99.99%","Pr( True Effect > 99.063) = 99.99%","Pr( True Effect > 99.072) = 99.99%","Pr( True Effect > 99.08) = 99.99%","Pr( True Effect > 99.089) = 99.99%","Pr( True Effect > 99.097) = 99.98%","Pr( True Effect > 99.106) = 99.98%","Pr( True Effect > 99.114) = 99.98%","Pr( True Effect > 99.123) = 99.98%","Pr( True Effect > 99.131) = 99.97%","Pr( True Effect > 99.14) = 99.97%","Pr( True Effect > 99.149) = 99.97%","Pr( True Effect > 99.157) = 99.97%","Pr( True Effect > 99.166) = 99.96%","Pr( True Effect > 99.174) = 99.96%","Pr( True Effect > 99.183) = 99.95%","Pr( True Effect > 99.191) = 99.95%","Pr( True Effect > 99.2) = 99.94%","Pr( True Effect > 99.208) = 99.93%","Pr( True Effect > 99.217) = 99.92%","Pr( True Effect > 99.226) = 99.91%","Pr( True Effect > 99.234) = 99.89%","Pr( True Effect > 99.243) = 99.88%","Pr( True Effect > 99.251) = 99.86%","Pr( True Effect > 99.26) = 99.84%","Pr( True Effect > 99.268) = 99.82%","Pr( True Effect > 99.277) = 99.80%","Pr( True Effect > 99.286) = 99.77%","Pr( True Effect > 99.294) = 99.75%","Pr( True Effect > 99.303) = 99.72%","Pr( True Effect > 99.311) = 99.68%","Pr( True Effect > 99.32) = 99.65%","Pr( True Effect > 99.328) = 99.61%","Pr( True Effect > 99.337) = 99.57%","Pr( True Effect > 99.345) = 99.52%","Pr( True Effect > 99.354) = 99.47%","Pr( True Effect > 99.363) = 99.41%","Pr( True Effect > 99.371) = 99.36%","Pr( True Effect > 99.38) = 99.29%","Pr( True Effect > 99.388) = 99.22%","Pr( True Effect > 99.397) = 99.15%","Pr( True Effect > 99.405) = 99.06%","Pr( True Effect > 99.414) = 98.97%","Pr( True Effect > 99.422) = 98.87%","Pr( True Effect > 99.431) = 98.77%","Pr( True Effect > 99.44) = 98.65%","Pr( True Effect > 99.448) = 98.53%","Pr( True Effect > 99.457) = 98.40%","Pr( True Effect > 99.465) = 98.26%","Pr( True Effect > 99.474) = 98.11%","Pr( True Effect > 99.482) = 97.95%","Pr( True Effect > 99.491) = 97.77%","Pr( True Effect > 99.499) = 97.58%","Pr( True Effect > 99.508) = 97.38%","Pr( True Effect > 99.517) = 97.17%","Pr( True Effect > 99.525) = 96.94%","Pr( True Effect > 99.534) = 96.69%","Pr( True Effect > 99.542) = 96.43%","Pr( True Effect > 99.551) = 96.15%","Pr( True Effect > 99.559) = 95.85%","Pr( True Effect > 99.568) = 95.53%","Pr( True Effect > 99.577) = 95.20%","Pr( True Effect > 99.585) = 94.84%","Pr( True Effect > 99.594) = 94.47%","Pr( True Effect > 99.602) = 94.08%","Pr( True Effect > 99.611) = 93.66%","Pr( True Effect > 99.619) = 93.23%","Pr( True Effect > 99.628) = 92.78%","Pr( True Effect > 99.636) = 92.31%","Pr( True Effect > 99.645) = 91.81%","Pr( True Effect > 99.654) = 91.29%","Pr( True Effect > 99.662) = 90.74%","Pr( True Effect > 99.671) = 90.17%","Pr( True Effect > 99.679) = 89.57%","Pr( True Effect > 99.688) = 88.94%","Pr( True Effect > 99.696) = 88.28%","Pr( True Effect > 99.705) = 87.60%","Pr( True Effect > 99.713) = 86.89%","Pr( True Effect > 99.722) = 86.16%","Pr( True Effect > 99.731) = 85.39%","Pr( True Effect > 99.739) = 84.60%","Pr( True Effect > 99.748) = 83.78%","Pr( True Effect > 99.756) = 82.93%","Pr( True Effect > 99.765) = 82.06%","Pr( True Effect > 99.773) = 81.16%","Pr( True Effect > 99.782) = 80.23%","Pr( True Effect > 99.79) = 79.28%","Pr( True Effect > 99.799) = 78.30%","Pr( True Effect > 99.808) = 77.28%","Pr( True Effect > 99.816) = 76.23%","Pr( True Effect > 99.825) = 75.16%","Pr( True Effect > 99.833) = 74.05%","Pr( True Effect > 99.842) = 72.91%","Pr( True Effect > 99.85) = 71.76%","Pr( True Effect > 99.859) = 70.58%","Pr( True Effect > 99.867) = 69.39%","Pr( True Effect > 99.876) = 68.19%","Pr( True Effect > 99.885) = 66.97%","Pr( True Effect > 99.893) = 65.73%","Pr( True Effect > 99.902) = 64.48%","Pr( True Effect > 99.91) = 63.22%","Pr( True Effect > 99.919) = 61.93%","Pr( True Effect > 99.927) = 60.64%","Pr( True Effect > 99.936) = 59.33%","Pr( True Effect > 99.945) = 58.01%","Pr( True Effect > 99.953) = 56.68%","Pr( True Effect > 99.962) = 55.35%","Pr( True Effect > 99.97) = 54.02%","Pr( True Effect > 99.979) = 52.68%","Pr( True Effect > 99.987) = 51.35%","Pr( True Effect > 99.996) = 50.01%"],"line":{"color":"#bd0707","width":0.05},"marker":{"size":50},"name":"< 100","showlegend":false,"stackgroup":"1","x":[98.97739468766636,98.98595333620668,98.99451198474699,99.00307063328731,99.01162928182762,99.02018793036794,99.02874657890825,99.03730522744857,99.04586387598889,99.0544225245292,99.06298117306952,99.07153982160983,99.08009847015015,99.08865711869046,99.09721576723078,99.1057744157711,99.11433306431141,99.12289171285173,99.13145036139204,99.14000900993236,99.14856765847267,99.15712630701299,99.1656849555533,99.17424360409362,99.18280225263393,99.19136090117425,99.19991954971456,99.20847819825488,99.2170368467952,99.22559549533551,99.23415414387583,99.24271279241614,99.25127144095644,99.25983008949676,99.26838873803707,99.27694738657739,99.2855060351177,99.29406468365802,99.30262333219834,99.31118198073865,99.31974062927897,99.32829927781928,99.3368579263596,99.34541657489991,99.35397522344023,99.36253387198055,99.37109252052086,99.37965116906118,99.38820981760149,99.39676846614181,99.40532711468212,99.41388576322244,99.42244441176275,99.43100306030307,99.43956170884339,99.4481203573837,99.45667900592402,99.46523765446433,99.47379630300465,99.48235495154496,99.49091360008528,99.4994722486256,99.50803089716591,99.51658954570622,99.52514819424654,99.53370684278686,99.54226549132717,99.55082413986749,99.5593827884078,99.56794143694812,99.57650008548843,99.58505873402875,99.59361738256906,99.60217603110938,99.6107346796497,99.61929332819001,99.62785197673033,99.63641062527064,99.64496927381096,99.65352792235127,99.66208657089159,99.6706452194319,99.67920386797222,99.68776251651254,99.69632116505285,99.70487981359317,99.71343846213348,99.7219971106738,99.73055575921411,99.73911440775443,99.74767305629474,99.75623170483506,99.76479035337537,99.77334900191568,99.78190765045599,99.79046629899631,99.79902494753662,99.80758359607694,99.81614224461725,99.82470089315757,99.83325954169788,99.8418181902382,99.85037683877852,99.85893548731883,99.86749413585915,99.87605278439946,99.88461143293978,99.8931700814801,99.90172873002041,99.91028737856072,99.91884602710104,99.92740467564136,99.93596332418167,99.94452197272199,99.9530806212623,99.96163926980262,99.97019791834293,99.97875656688325,99.98731521542356,99.99587386396388],"y":[0.0003583923154002481,0.00040778543957338564,0.00045988370265749806,0.0005331852896658465,0.0006419362247496857,0.0007868294502872428,0.0009545742625276936,0.0011270932857476855,0.0012935196138602128,0.00145614798301973,0.0016265391903440111,0.0018153103210460791,0.0020228887079929408,0.0022369952579056225,0.0024382756166371807,0.0026112023813977146,0.0027546657707009314,0.0028865696565805866,0.0030399220681180165,0.0032531723797501553,0.0035613992714245853,0.0039939889625878995,0.004578753863920527,0.005346325212588236,0.006327253440552032,0.00753914259479553,0.008969312725665094,0.010564994048835494,0.012243582374524152,0.013927157490745894,0.015589107330873939,0.017284893030695095,0.01913884586692147,0.0212834002186481,0.02378388825637795,0.02659997277242804,0.02961256554317976,0.032697486955281914,0.03579514247670646,0.03893496445109056,0.04221019973492778,0.04572893792226344,0.04957320749483435,0.05378574740549705,0.05838598368064054,0.06340004583782018,0.06888149558346134,0.07490713543707467,0.08155186088483511,0.08886042645905101,0.09682942912123399,0.10539927759385095,0.11445475862703623,0.12384717104091877,0.1334556782720631,0.14327725115580794,0.15348952995874024,0.1644187953202034,0.17639815794754948,0.18959110523120784,0.2039070166522791,0.21908777824763392,0.23491727331147275,0.2513988452542261,0.2687594215904192,0.28727245189639994,0.3070351246465081,0.3278670189816937,0.34939307278540915,0.37122589826224217,0.39310089989251434,0.41489442923678305,0.436586960770136,0.45827477941686984,0.48023805557150234,0.5029591090656164,0.5270004125674344,0.5527875496382889,0.5804392693599911,0.6097401961705546,0.6402351805956477,0.671374643318725,0.702675106919481,0.7338776951279469,0.7650386084218656,0.7964553868727026,0.8284215249801128,0.8609588758356832,0.8937314257018916,0.926212989514002,0.9579859979986544,0.9889752069049527,1.019508086893793,1.050218167799884,1.081854439897,1.1150431226191737,1.1500423319195434,1.1865537571839833,1.2236672166819338,1.2599878612676225,1.293944572685401,1.3242160568741854,1.3501448326264183,1.3719701484477953,1.390751371810721,1.407985266824951,1.4250756139845728,1.4428881763906918,1.4615634731756548,1.4806053016477176,1.4991262066736766,1.5161081722784049,1.5306187131779343,1.5419998145761409,1.550031532338058,1.555003299514873,1.557620878978513,1.5587739577295152,1.559290328946337,1.5597931653773947],"type":"scatter","hoverlabel":{"font":{"size":19}}},{"hoverinfo":"none","hovertext":["Pr( True Effect > 100.004) = 48.68%","Pr( True Effect > 100.013) = 47.34%","Pr( True Effect > 100.022) = 46.00%","Pr( True Effect > 100.03) = 44.66%","Pr( True Effect > 100.039) = 43.32%","Pr( True Effect > 100.047) = 41.98%","Pr( True Effect > 100.056) = 40.64%","Pr( True Effect > 100.064) = 39.30%","Pr( True Effect > 100.073) = 37.97%","Pr( True Effect > 100.081) = 36.66%","Pr( True Effect > 100.09) = 35.36%","Pr( True Effect > 100.099) = 34.08%","Pr( True Effect > 100.107) = 32.83%","Pr( True Effect > 100.116) = 31.60%","Pr( True Effect > 100.124) = 30.40%","Pr( True Effect > 100.133) = 29.22%","Pr( True Effect > 100.141) = 28.06%","Pr( True Effect > 100.15) = 26.93%","Pr( True Effect > 100.158) = 25.82%","Pr( True Effect > 100.167) = 24.73%","Pr( True Effect > 100.176) = 23.67%","Pr( True Effect > 100.184) = 22.63%","Pr( True Effect > 100.193) = 21.62%","Pr( True Effect > 100.201) = 20.64%","Pr( True Effect > 100.21) = 19.68%","Pr( True Effect > 100.218) = 18.75%","Pr( True Effect > 100.227) = 17.85%","Pr( True Effect > 100.236) = 16.97%","Pr( True Effect > 100.244) = 16.13%","Pr( True Effect > 100.253) = 15.31%","Pr( True Effect > 100.261) = 14.52%","Pr( True Effect > 100.27) = 13.76%","Pr( True Effect > 100.278) = 13.03%","Pr( True Effect > 100.287) = 12.32%","Pr( True Effect > 100.295) = 11.64%","Pr( True Effect > 100.304) = 10.99%","Pr( True Effect > 100.313) = 10.37%","Pr( True Effect > 100.321) = 9.76%","Pr( True Effect > 100.33) = 9.18%","Pr( True Effect > 100.338) = 8.63%","Pr( True Effect > 100.347) = 8.10%","Pr( True Effect > 100.355) = 7.59%","Pr( True Effect > 100.364) = 7.12%","Pr( True Effect > 100.372) = 6.66%","Pr( True Effect > 100.381) = 6.24%","Pr( True Effect > 100.39) = 5.84%","Pr( True Effect > 100.398) = 5.46%","Pr( True Effect > 100.407) = 5.10%","Pr( True Effect > 100.415) = 4.76%","Pr( True Effect > 100.424) = 4.44%","Pr( True Effect > 100.432) = 4.14%","Pr( True Effect > 100.441) = 3.85%","Pr( True Effect > 100.449) = 3.58%","Pr( True Effect > 100.458) = 3.32%","Pr( True Effect > 100.467) = 3.08%","Pr( True Effect > 100.475) = 2.85%","Pr( True Effect > 100.484) = 2.64%","Pr( True Effect > 100.492) = 2.43%","Pr( True Effect > 100.501) = 2.24%","Pr( True Effect > 100.509) = 2.07%","Pr( True Effect > 100.518) = 1.90%","Pr( True Effect > 100.527) = 1.74%","Pr( True Effect > 100.535) = 1.60%","Pr( True Effect > 100.544) = 1.47%","Pr( True Effect > 100.552) = 1.35%","Pr( True Effect > 100.561) = 1.23%","Pr( True Effect > 100.569) = 1.13%","Pr( True Effect > 100.578) = 1.03%","Pr( True Effect > 100.586) = 0.94%","Pr( True Effect > 100.595) = 0.86%","Pr( True Effect > 100.604) = 0.78%","Pr( True Effect > 100.612) = 0.71%","Pr( True Effect > 100.621) = 0.65%","Pr( True Effect > 100.629) = 0.59%","Pr( True Effect > 100.638) = 0.54%","Pr( True Effect > 100.646) = 0.50%","Pr( True Effect > 100.655) = 0.46%","Pr( True Effect > 100.663) = 0.42%","Pr( True Effect > 100.672) = 0.38%","Pr( True Effect > 100.681) = 0.35%","Pr( True Effect > 100.689) = 0.32%","Pr( True Effect > 100.698) = 0.29%","Pr( True Effect > 100.706) = 0.26%","Pr( True Effect > 100.715) = 0.23%","Pr( True Effect > 100.723) = 0.20%","Pr( True Effect > 100.732) = 0.18%","Pr( True Effect > 100.74) = 0.16%","Pr( True Effect > 100.749) = 0.14%","Pr( True Effect > 100.758) = 0.12%","Pr( True Effect > 100.766) = 0.11%","Pr( True Effect > 100.775) = 0.09%","Pr( True Effect > 100.783) = 0.08%","Pr( True Effect > 100.792) = 0.07%","Pr( True Effect > 100.8) = 0.06%","Pr( True Effect > 100.809) = 0.06%","Pr( True Effect > 100.818) = 0.05%","Pr( True Effect > 100.826) = 0.04%","Pr( True Effect > 100.835) = 0.04%","Pr( True Effect > 100.843) = 0.03%","Pr( True Effect > 100.852) = 0.03%","Pr( True Effect > 100.86) = 0.02%","Pr( True Effect > 100.869) = 0.02%","Pr( True Effect > 100.877) = 0.02%","Pr( True Effect > 100.886) = 0.02%","Pr( True Effect > 100.895) = 0.01%","Pr( True Effect > 100.903) = 0.01%","Pr( True Effect > 100.912) = 0.01%","Pr( True Effect > 100.92) = 0.01%","Pr( True Effect > 100.929) = 0.01%","Pr( True Effect > 100.937) = 0.01%","Pr( True Effect > 100.946) = 0.01%","Pr( True Effect > 100.954) = 0.01%","Pr( True Effect > 100.963) = 0.00%","Pr( True Effect > 100.972) = 0.00%","Pr( True Effect > 100.98) = 0.00%","Pr( True Effect > 100.989) = 0.00%","Pr( True Effect > 100.997) = 0.00%","Pr( True Effect > 101.006) = 0.00%","Pr( True Effect > 101.014) = 0.00%","Pr( True Effect > 101.023) = 0.00%","Pr( True Effect > 101.031) = 0.00%","Pr( True Effect > 101.04) = 0.00%","Pr( True Effect > 101.049) = 0.00%","Pr( True Effect > 101.057) = 0.00%","Pr( True Effect > 101.066) = 0.00%","Pr( True Effect > 101.074) = 0.00%","Pr( True Effect > 101.083) = 0.00%","Pr( True Effect > 101.091) = 0.00%","Pr( True Effect > 101.1) = 0.00%","Pr( True Effect > 101.108) = 0.00%"],"line":{"color":"#0177c9","width":0.05},"marker":{"size":18},"name":"> 100","showlegend":false,"stackgroup":"1","x":[100.0044325125042,100.01299116104451,100.02154980958483,100.03010845812514,100.03866710666546,100.04722575520577,100.05578440374609,100.0643430522864,100.07290170082672,100.08146034936703,100.09001899790735,100.09857764644767,100.10713629498798,100.1156949435283,100.12425359206861,100.13281224060893,100.14137088914924,100.14992953768956,100.15848818622987,100.16704683477019,100.1756054833105,100.18416413185082,100.19272278039114,100.20128142893145,100.20984007747177,100.21839872601208,100.2269573745524,100.23551602309271,100.24407467163303,100.25263332017335,100.26119196871366,100.26975061725398,100.27830926579429,100.28686791433461,100.29542656287492,100.30398521141524,100.31254385995554,100.32110250849585,100.32966115703617,100.33821980557649,100.3467784541168,100.35533710265712,100.36389575119743,100.37245439973775,100.38101304827806,100.38957169681838,100.3981303453587,100.40668899389901,100.41524764243933,100.42380629097964,100.43236493951996,100.44092358806027,100.44948223660059,100.4580408851409,100.46659953368122,100.47515818222153,100.48371683076185,100.49227547930217,100.50083412784248,100.5093927763828,100.51795142492311,100.52651007346343,100.53506872200374,100.54362737054406,100.55218601908437,100.56074466762469,100.569303316165,100.57786196470532,100.58642061324564,100.59497926178595,100.60353791032627,100.61209655886658,100.6206552074069,100.62921385594721,100.63777250448753,100.64633115302784,100.65488980156816,100.66344845010848,100.67200709864879,100.6805657471891,100.68912439572942,100.69768304426974,100.70624169281005,100.71480034135037,100.72335898989068,100.731917638431,100.74047628697132,100.74903493551163,100.75759358405195,100.76615223259226,100.77471088113258,100.78326952967289,100.79182817821321,100.80038682675352,100.80894547529384,100.81750412383415,100.82606277237447,100.83462142091477,100.84318006945509,100.8517387179954,100.86029736653572,100.86885601507603,100.87741466361635,100.88597331215666,100.89453196069698,100.9030906092373,100.91164925777761,100.92020790631793,100.92876655485824,100.93732520339856,100.94588385193887,100.95444250047919,100.9630011490195,100.97155979755982,100.98011844610014,100.98867709464045,100.99723574318077,101.00579439172108,101.0143530402614,101.02291168880171,101.03147033734203,101.04002898588234,101.04858763442266,101.05714628296298,101.06570493150329,101.0742635800436,101.08282222858392,101.09138087712424,101.09993952566455,101.10849817420487],"y":[1.5606723195204335,1.562098555655532,1.5640205265249996,1.5661369794939315,1.5678611593481966,1.5683028350232944,1.5663220313864266,1.5607165810067427,1.550527567974807,1.5353286338097072,1.5153433006921964,1.4913525971459707,1.4644881569714876,1.4360161955476864,1.4071295270291027,1.3787198354130434,1.3511689653492014,1.324283440749139,1.297463803531005,1.2700420553450658,1.2415844735951906,1.2119892973271313,1.1813850555209158,1.1499800005713186,1.1179920671993424,1.08565365980141,1.0531999803054286,1.020794224034855,0.9884412010693933,0.9559773773132422,0.9231781600672748,0.8899480520316689,0.8564981628169719,0.8233862200240051,0.7913345607038315,0.7608764157615416,0.732034169230385,0.7042552402911951,0.6766640397083523,0.6484646540157304,0.6192473090151733,0.5890669792503271,0.5583411332022716,0.5276929176822973,0.49781598867277355,0.46935548460686877,0.4427826514775203,0.41828689056926,0.3957446025975163,0.3747979531036356,0.35501152545475834,0.336030573998279,0.31767234150800505,0.2999252790167368,0.28287598314519286,0.26660883709422406,0.25112528077941637,0.23631511091375637,0.22199011218487405,0.20796559136871623,0.1941511364436908,0.18060013643705972,0.16748642062837948,0.15502300974937777,0.1433752315255039,0.13261295842413195,0.12270633398676614,0.11354182713964597,0.10494348672843695,0.09670597227306414,0.08865019703551581,0.08069418504190806,0.07290873296772343,0.06551984807860863,0.058838512734805906,0.05313808592951823,0.04853692367908176,0.04494913977288455,0.042129932162022876,0.03978556282142473,0.03768057173817378,0.03568259236946711,0.033732876648028556,0.03178341803198615,0.02975947980762974,0.02757697899982996,0.02519456973172796,0.022652783633543862,0.020066898580362615,0.017579181205731327,0.015305422300390517,0.013308637136303553,0.011605637761067922,0.010186234484939985,0.00902283926967443,0.008068148142659217,0.0072562569181919764,0.006518679238118692,0.005807904134278123,0.005110248225183385,0.004438619332743002,0.0038135889644954723,0.0032491955052817677,0.002751868864184519,0.0023268487226147444,0.001980601257048382,0.0017144806986510502,0.0015161436360789278,0.0013592571729866547,0.0012149153702047217,0.0010670450800794224,0.0009196722200198741,0.0007902216502195621,0.0006941705138501165,0.0006327414479674267,0.0005921099674559293,0.0005532153182325369,0.0005036326329651855,0.00044278424679736975,0.0003782443744638655,0.0003180058394895808,0.0002655392152266931,0.0002205616924797977,0.00018297420224927158,0.00015529159914400844,0.0001411740060075115,0.00014154691871220577,0.00015183431578645262,0.00016281887493121882,0.0001648200202006178],"type":"scatter","hoverlabel":{"font":{"size":19}}},{"hoverinfo":"text","hovertext":["Pr( True Effect > 98.977) = 100.00%","Pr( True Effect > 98.986) = 100.00%","Pr( True Effect > 98.995) = 100.00%","Pr( True Effect > 99.003) = 100.00%","Pr( True Effect > 99.012) = 100.00%","Pr( True Effect > 99.02) = 100.00%","Pr( True Effect > 99.029) = 100.00%","Pr( True Effect > 99.037) = 100.00%","Pr( True Effect > 99.046) = 99.99%","Pr( True Effect > 99.054) = 99.99%","Pr( True Effect > 99.063) = 99.99%","Pr( True Effect > 99.072) = 99.99%","Pr( True Effect > 99.08) = 99.99%","Pr( True Effect > 99.089) = 99.99%","Pr( True Effect > 99.097) = 99.98%","Pr( True Effect > 99.106) = 99.98%","Pr( True Effect > 99.114) = 99.98%","Pr( True Effect > 99.123) = 99.98%","Pr( True Effect > 99.131) = 99.97%","Pr( True Effect > 99.14) = 99.97%","Pr( True Effect > 99.149) = 99.97%","Pr( True Effect > 99.157) = 99.97%","Pr( True Effect > 99.166) = 99.96%","Pr( True Effect > 99.174) = 99.96%","Pr( True Effect > 99.183) = 99.95%","Pr( True Effect > 99.191) = 99.95%","Pr( True Effect > 99.2) = 99.94%","Pr( True Effect > 99.208) = 99.93%","Pr( True Effect > 99.217) = 99.92%","Pr( True Effect > 99.226) = 99.91%","Pr( True Effect > 99.234) = 99.89%","Pr( True Effect > 99.243) = 99.88%","Pr( True Effect > 99.251) = 99.86%","Pr( True Effect > 99.26) = 99.84%","Pr( True Effect > 99.268) = 99.82%","Pr( True Effect > 99.277) = 99.80%","Pr( True Effect > 99.286) = 99.77%","Pr( True Effect > 99.294) = 99.75%","Pr( True Effect > 99.303) = 99.72%","Pr( True Effect > 99.311) = 99.68%","Pr( True Effect > 99.32) = 99.65%","Pr( True Effect > 99.328) = 99.61%","Pr( True Effect > 99.337) = 99.57%","Pr( True Effect > 99.345) = 99.52%","Pr( True Effect > 99.354) = 99.47%","Pr( True Effect > 99.363) = 99.41%","Pr( True Effect > 99.371) = 99.36%","Pr( True Effect > 99.38) = 99.29%","Pr( True Effect > 99.388) = 99.22%","Pr( True Effect > 99.397) = 99.15%","Pr( True Effect > 99.405) = 99.06%","Pr( True Effect > 99.414) = 98.97%","Pr( True Effect > 99.422) = 98.87%","Pr( True Effect > 99.431) = 98.77%","Pr( True Effect > 99.44) = 98.65%","Pr( True Effect > 99.448) = 98.53%","Pr( True Effect > 99.457) = 98.40%","Pr( True Effect > 99.465) = 98.26%","Pr( True Effect > 99.474) = 98.11%","Pr( True Effect > 99.482) = 97.95%","Pr( True Effect > 99.491) = 97.77%","Pr( True Effect > 99.499) = 97.58%","Pr( True Effect > 99.508) = 97.38%","Pr( True Effect > 99.517) = 97.17%","Pr( True Effect > 99.525) = 96.94%","Pr( True Effect > 99.534) = 96.69%","Pr( True Effect > 99.542) = 96.43%","Pr( True Effect > 99.551) = 96.15%","Pr( True Effect > 99.559) = 95.85%","Pr( True Effect > 99.568) = 95.53%","Pr( True Effect > 99.577) = 95.20%","Pr( True Effect > 99.585) = 94.84%","Pr( True Effect > 99.594) = 94.47%","Pr( True Effect > 99.602) = 94.08%","Pr( True Effect > 99.611) = 93.66%","Pr( True Effect > 99.619) = 93.23%","Pr( True Effect > 99.628) = 92.78%","Pr( True Effect > 99.636) = 92.31%","Pr( True Effect > 99.645) = 91.81%","Pr( True Effect > 99.654) = 91.29%","Pr( True Effect > 99.662) = 90.74%","Pr( True Effect > 99.671) = 90.17%","Pr( True Effect > 99.679) = 89.57%","Pr( True Effect > 99.688) = 88.94%","Pr( True Effect > 99.696) = 88.28%","Pr( True Effect > 99.705) = 87.60%","Pr( True Effect > 99.713) = 86.89%","Pr( True Effect > 99.722) = 86.16%","Pr( True Effect > 99.731) = 85.39%","Pr( True Effect > 99.739) = 84.60%","Pr( True Effect > 99.748) = 83.78%","Pr( True Effect > 99.756) = 82.93%","Pr( True Effect > 99.765) = 82.06%","Pr( True Effect > 99.773) = 81.16%","Pr( True Effect > 99.782) = 80.23%","Pr( True Effect > 99.79) = 79.28%","Pr( True Effect > 99.799) = 78.30%","Pr( True Effect > 99.808) = 77.28%","Pr( True Effect > 99.816) = 76.23%","Pr( True Effect > 99.825) = 75.16%","Pr( True Effect > 99.833) = 74.05%","Pr( True Effect > 99.842) = 72.91%","Pr( True Effect > 99.85) = 71.76%","Pr( True Effect > 99.859) = 70.58%","Pr( True Effect > 99.867) = 69.39%","Pr( True Effect > 99.876) = 68.19%","Pr( True Effect > 99.885) = 66.97%","Pr( True Effect > 99.893) = 65.73%","Pr( True Effect > 99.902) = 64.48%","Pr( True Effect > 99.91) = 63.22%","Pr( True Effect > 99.919) = 61.93%","Pr( True Effect > 99.927) = 60.64%","Pr( True Effect > 99.936) = 59.33%","Pr( True Effect > 99.945) = 58.01%","Pr( True Effect > 99.953) = 56.68%","Pr( True Effect > 99.962) = 55.35%","Pr( True Effect > 99.97) = 54.02%","Pr( True Effect > 99.979) = 52.68%","Pr( True Effect > 99.987) = 51.35%","Pr( True Effect > 99.996) = 50.01%","Pr( True Effect > 100.004) = 48.68%","Pr( True Effect > 100.013) = 47.34%","Pr( True Effect > 100.022) = 46.00%","Pr( True Effect > 100.03) = 44.66%","Pr( True Effect > 100.039) = 43.32%","Pr( True Effect > 100.047) = 41.98%","Pr( True Effect > 100.056) = 40.64%","Pr( True Effect > 100.064) = 39.30%","Pr( True Effect > 100.073) = 37.97%","Pr( True Effect > 100.081) = 36.66%","Pr( True Effect > 100.09) = 35.36%","Pr( True Effect > 100.099) = 34.08%","Pr( True Effect > 100.107) = 32.83%","Pr( True Effect > 100.116) = 31.60%","Pr( True Effect > 100.124) = 30.40%","Pr( True Effect > 100.133) = 29.22%","Pr( True Effect > 100.141) = 28.06%","Pr( True Effect > 100.15) = 26.93%","Pr( True Effect > 100.158) = 25.82%","Pr( True Effect > 100.167) = 24.73%","Pr( True Effect > 100.176) = 23.67%","Pr( True Effect > 100.184) = 22.63%","Pr( True Effect > 100.193) = 21.62%","Pr( True Effect > 100.201) = 20.64%","Pr( True Effect > 100.21) = 19.68%","Pr( True Effect > 100.218) = 18.75%","Pr( True Effect > 100.227) = 17.85%","Pr( True Effect > 100.236) = 16.97%","Pr( True Effect > 100.244) = 16.13%","Pr( True Effect > 100.253) = 15.31%","Pr( True Effect > 100.261) = 14.52%","Pr( True Effect > 100.27) = 13.76%","Pr( True Effect > 100.278) = 13.03%","Pr( True Effect > 100.287) = 12.32%","Pr( True Effect > 100.295) = 11.64%","Pr( True Effect > 100.304) = 10.99%","Pr( True Effect > 100.313) = 10.37%","Pr( True Effect > 100.321) = 9.76%","Pr( True Effect > 100.33) = 9.18%","Pr( True Effect > 100.338) = 8.63%","Pr( True Effect > 100.347) = 8.10%","Pr( True Effect > 100.355) = 7.59%","Pr( True Effect > 100.364) = 7.12%","Pr( True Effect > 100.372) = 6.66%","Pr( True Effect > 100.381) = 6.24%","Pr( True Effect > 100.39) = 5.84%","Pr( True Effect > 100.398) = 5.46%","Pr( True Effect > 100.407) = 5.10%","Pr( True Effect > 100.415) = 4.76%","Pr( True Effect > 100.424) = 4.44%","Pr( True Effect > 100.432) = 4.14%","Pr( True Effect > 100.441) = 3.85%","Pr( True Effect > 100.449) = 3.58%","Pr( True Effect > 100.458) = 3.32%","Pr( True Effect > 100.467) = 3.08%","Pr( True Effect > 100.475) = 2.85%","Pr( True Effect > 100.484) = 2.64%","Pr( True Effect > 100.492) = 2.43%","Pr( True Effect > 100.501) = 2.24%","Pr( True Effect > 100.509) = 2.07%","Pr( True Effect > 100.518) = 1.90%","Pr( True Effect > 100.527) = 1.74%","Pr( True Effect > 100.535) = 1.60%","Pr( True Effect > 100.544) = 1.47%","Pr( True Effect > 100.552) = 1.35%","Pr( True Effect > 100.561) = 1.23%","Pr( True Effect > 100.569) = 1.13%","Pr( True Effect > 100.578) = 1.03%","Pr( True Effect > 100.586) = 0.94%","Pr( True Effect > 100.595) = 0.86%","Pr( True Effect > 100.604) = 0.78%","Pr( True Effect > 100.612) = 0.71%","Pr( True Effect > 100.621) = 0.65%","Pr( True Effect > 100.629) = 0.59%","Pr( True Effect > 100.638) = 0.54%","Pr( True Effect > 100.646) = 0.50%","Pr( True Effect > 100.655) = 0.46%","Pr( True Effect > 100.663) = 0.42%","Pr( True Effect > 100.672) = 0.38%","Pr( True Effect > 100.681) = 0.35%","Pr( True Effect > 100.689) = 0.32%","Pr( True Effect > 100.698) = 0.29%","Pr( True Effect > 100.706) = 0.26%","Pr( True Effect > 100.715) = 0.23%","Pr( True Effect > 100.723) = 0.20%","Pr( True Effect > 100.732) = 0.18%","Pr( True Effect > 100.74) = 0.16%","Pr( True Effect > 100.749) = 0.14%","Pr( True Effect > 100.758) = 0.12%","Pr( True Effect > 100.766) = 0.11%","Pr( True Effect > 100.775) = 0.09%","Pr( True Effect > 100.783) = 0.08%","Pr( True Effect > 100.792) = 0.07%","Pr( True Effect > 100.8) = 0.06%","Pr( True Effect > 100.809) = 0.06%","Pr( True Effect > 100.818) = 0.05%","Pr( True Effect > 100.826) = 0.04%","Pr( True Effect > 100.835) = 0.04%","Pr( True Effect > 100.843) = 0.03%","Pr( True Effect > 100.852) = 0.03%","Pr( True Effect > 100.86) = 0.02%","Pr( True Effect > 100.869) = 0.02%","Pr( True Effect > 100.877) = 0.02%","Pr( True Effect > 100.886) = 0.02%","Pr( True Effect > 100.895) = 0.01%","Pr( True Effect > 100.903) = 0.01%","Pr( True Effect > 100.912) = 0.01%","Pr( True Effect > 100.92) = 0.01%","Pr( True Effect > 100.929) = 0.01%","Pr( True Effect > 100.937) = 0.01%","Pr( True Effect > 100.946) = 0.01%","Pr( True Effect > 100.954) = 0.01%","Pr( True Effect > 100.963) = 0.00%","Pr( True Effect > 100.972) = 0.00%","Pr( True Effect > 100.98) = 0.00%","Pr( True Effect > 100.989) = 0.00%","Pr( True Effect > 100.997) = 0.00%","Pr( True Effect > 101.006) = 0.00%","Pr( True Effect > 101.014) = 0.00%","Pr( True Effect > 101.023) = 0.00%","Pr( True Effect > 101.031) = 0.00%","Pr( True Effect > 101.04) = 0.00%","Pr( True Effect > 101.049) = 0.00%","Pr( True Effect > 101.057) = 0.00%","Pr( True Effect > 101.066) = 0.00%","Pr( True Effect > 101.074) = 0.00%","Pr( True Effect > 101.083) = 0.00%","Pr( True Effect > 101.091) = 0.00%","Pr( True Effect > 101.1) = 0.00%","Pr( True Effect > 101.108) = 0.00%"],"line":{"color":"black","width":1.5},"mode":"lines","showlegend":false,"x":[98.97739468766636,98.98595333620668,98.99451198474699,99.00307063328731,99.01162928182762,99.02018793036794,99.02874657890825,99.03730522744857,99.04586387598889,99.0544225245292,99.06298117306952,99.07153982160983,99.08009847015015,99.08865711869046,99.09721576723078,99.1057744157711,99.11433306431141,99.12289171285173,99.13145036139204,99.14000900993236,99.14856765847267,99.15712630701299,99.1656849555533,99.17424360409362,99.18280225263393,99.19136090117425,99.19991954971456,99.20847819825488,99.2170368467952,99.22559549533551,99.23415414387583,99.24271279241614,99.25127144095644,99.25983008949676,99.26838873803707,99.27694738657739,99.2855060351177,99.29406468365802,99.30262333219834,99.31118198073865,99.31974062927897,99.32829927781928,99.3368579263596,99.34541657489991,99.35397522344023,99.36253387198055,99.37109252052086,99.37965116906118,99.38820981760149,99.39676846614181,99.40532711468212,99.41388576322244,99.42244441176275,99.43100306030307,99.43956170884339,99.4481203573837,99.45667900592402,99.46523765446433,99.47379630300465,99.48235495154496,99.49091360008528,99.4994722486256,99.50803089716591,99.51658954570622,99.52514819424654,99.53370684278686,99.54226549132717,99.55082413986749,99.5593827884078,99.56794143694812,99.57650008548843,99.58505873402875,99.59361738256906,99.60217603110938,99.6107346796497,99.61929332819001,99.62785197673033,99.63641062527064,99.64496927381096,99.65352792235127,99.66208657089159,99.6706452194319,99.67920386797222,99.68776251651254,99.69632116505285,99.70487981359317,99.71343846213348,99.7219971106738,99.73055575921411,99.73911440775443,99.74767305629474,99.75623170483506,99.76479035337537,99.77334900191568,99.78190765045599,99.79046629899631,99.79902494753662,99.80758359607694,99.81614224461725,99.82470089315757,99.83325954169788,99.8418181902382,99.85037683877852,99.85893548731883,99.86749413585915,99.87605278439946,99.88461143293978,99.8931700814801,99.90172873002041,99.91028737856072,99.91884602710104,99.92740467564136,99.93596332418167,99.94452197272199,99.9530806212623,99.96163926980262,99.97019791834293,99.97875656688325,99.98731521542356,99.99587386396388,100.0044325125042,100.01299116104451,100.02154980958483,100.03010845812514,100.03866710666546,100.04722575520577,100.05578440374609,100.0643430522864,100.07290170082672,100.08146034936703,100.09001899790735,100.09857764644767,100.10713629498798,100.1156949435283,100.12425359206861,100.13281224060893,100.14137088914924,100.14992953768956,100.15848818622987,100.16704683477019,100.1756054833105,100.18416413185082,100.19272278039114,100.20128142893145,100.20984007747177,100.21839872601208,100.2269573745524,100.23551602309271,100.24407467163303,100.25263332017335,100.26119196871366,100.26975061725398,100.27830926579429,100.28686791433461,100.29542656287492,100.30398521141524,100.31254385995554,100.32110250849585,100.32966115703617,100.33821980557649,100.3467784541168,100.35533710265712,100.36389575119743,100.37245439973775,100.38101304827806,100.38957169681838,100.3981303453587,100.40668899389901,100.41524764243933,100.42380629097964,100.43236493951996,100.44092358806027,100.44948223660059,100.4580408851409,100.46659953368122,100.47515818222153,100.48371683076185,100.49227547930217,100.50083412784248,100.5093927763828,100.51795142492311,100.52651007346343,100.53506872200374,100.54362737054406,100.55218601908437,100.56074466762469,100.569303316165,100.57786196470532,100.58642061324564,100.59497926178595,100.60353791032627,100.61209655886658,100.6206552074069,100.62921385594721,100.63777250448753,100.64633115302784,100.65488980156816,100.66344845010848,100.67200709864879,100.6805657471891,100.68912439572942,100.69768304426974,100.70624169281005,100.71480034135037,100.72335898989068,100.731917638431,100.74047628697132,100.74903493551163,100.75759358405195,100.76615223259226,100.77471088113258,100.78326952967289,100.79182817821321,100.80038682675352,100.80894547529384,100.81750412383415,100.82606277237447,100.83462142091477,100.84318006945509,100.8517387179954,100.86029736653572,100.86885601507603,100.87741466361635,100.88597331215666,100.89453196069698,100.9030906092373,100.91164925777761,100.92020790631793,100.92876655485824,100.93732520339856,100.94588385193887,100.95444250047919,100.9630011490195,100.97155979755982,100.98011844610014,100.98867709464045,100.99723574318077,101.00579439172108,101.0143530402614,101.02291168880171,101.03147033734203,101.04002898588234,101.04858763442266,101.05714628296298,101.06570493150329,101.0742635800436,101.08282222858392,101.09138087712424,101.09993952566455,101.10849817420487],"y":[0.0003583923154002481,0.00040778543957338564,0.00045988370265749806,0.0005331852896658465,0.0006419362247496857,0.0007868294502872428,0.0009545742625276936,0.0011270932857476855,0.0012935196138602128,0.00145614798301973,0.0016265391903440111,0.0018153103210460791,0.0020228887079929408,0.0022369952579056225,0.0024382756166371807,0.0026112023813977146,0.0027546657707009314,0.0028865696565805866,0.0030399220681180165,0.0032531723797501553,0.0035613992714245853,0.0039939889625878995,0.004578753863920527,0.005346325212588236,0.006327253440552032,0.00753914259479553,0.008969312725665094,0.010564994048835494,0.012243582374524152,0.013927157490745894,0.015589107330873939,0.017284893030695095,0.01913884586692147,0.0212834002186481,0.02378388825637795,0.02659997277242804,0.02961256554317976,0.032697486955281914,0.03579514247670646,0.03893496445109056,0.04221019973492778,0.04572893792226344,0.04957320749483435,0.05378574740549705,0.05838598368064054,0.06340004583782018,0.06888149558346134,0.07490713543707467,0.08155186088483511,0.08886042645905101,0.09682942912123399,0.10539927759385095,0.11445475862703623,0.12384717104091877,0.1334556782720631,0.14327725115580794,0.15348952995874024,0.1644187953202034,0.17639815794754948,0.18959110523120784,0.2039070166522791,0.21908777824763392,0.23491727331147275,0.2513988452542261,0.2687594215904192,0.28727245189639994,0.3070351246465081,0.3278670189816937,0.34939307278540915,0.37122589826224217,0.39310089989251434,0.41489442923678305,0.436586960770136,0.45827477941686984,0.48023805557150234,0.5029591090656164,0.5270004125674344,0.5527875496382889,0.5804392693599911,0.6097401961705546,0.6402351805956477,0.671374643318725,0.702675106919481,0.7338776951279469,0.7650386084218656,0.7964553868727026,0.8284215249801128,0.8609588758356832,0.8937314257018916,0.926212989514002,0.9579859979986544,0.9889752069049527,1.019508086893793,1.050218167799884,1.081854439897,1.1150431226191737,1.1500423319195434,1.1865537571839833,1.2236672166819338,1.2599878612676225,1.293944572685401,1.3242160568741854,1.3501448326264183,1.3719701484477953,1.390751371810721,1.407985266824951,1.4250756139845728,1.4428881763906918,1.4615634731756548,1.4806053016477176,1.4991262066736766,1.5161081722784049,1.5306187131779343,1.5419998145761409,1.550031532338058,1.555003299514873,1.557620878978513,1.5587739577295152,1.559290328946337,1.5597931653773947,1.5606723195204335,1.562098555655532,1.5640205265249996,1.5661369794939315,1.5678611593481966,1.5683028350232944,1.5663220313864266,1.5607165810067427,1.550527567974807,1.5353286338097072,1.5153433006921964,1.4913525971459707,1.4644881569714876,1.4360161955476864,1.4071295270291027,1.3787198354130434,1.3511689653492014,1.324283440749139,1.297463803531005,1.2700420553450658,1.2415844735951906,1.2119892973271313,1.1813850555209158,1.1499800005713186,1.1179920671993424,1.08565365980141,1.0531999803054286,1.020794224034855,0.9884412010693933,0.9559773773132422,0.9231781600672748,0.8899480520316689,0.8564981628169719,0.8233862200240051,0.7913345607038315,0.7608764157615416,0.732034169230385,0.7042552402911951,0.6766640397083523,0.6484646540157304,0.6192473090151733,0.5890669792503271,0.5583411332022716,0.5276929176822973,0.49781598867277355,0.46935548460686877,0.4427826514775203,0.41828689056926,0.3957446025975163,0.3747979531036356,0.35501152545475834,0.336030573998279,0.31767234150800505,0.2999252790167368,0.28287598314519286,0.26660883709422406,0.25112528077941637,0.23631511091375637,0.22199011218487405,0.20796559136871623,0.1941511364436908,0.18060013643705972,0.16748642062837948,0.15502300974937777,0.1433752315255039,0.13261295842413195,0.12270633398676614,0.11354182713964597,0.10494348672843695,0.09670597227306414,0.08865019703551581,0.08069418504190806,0.07290873296772343,0.06551984807860863,0.058838512734805906,0.05313808592951823,0.04853692367908176,0.04494913977288455,0.042129932162022876,0.03978556282142473,0.03768057173817378,0.03568259236946711,0.033732876648028556,0.03178341803198615,0.02975947980762974,0.02757697899982996,0.02519456973172796,0.022652783633543862,0.020066898580362615,0.017579181205731327,0.015305422300390517,0.013308637136303553,0.011605637761067922,0.010186234484939985,0.00902283926967443,0.008068148142659217,0.0072562569181919764,0.006518679238118692,0.005807904134278123,0.005110248225183385,0.004438619332743002,0.0038135889644954723,0.0032491955052817677,0.002751868864184519,0.0023268487226147444,0.001980601257048382,0.0017144806986510502,0.0015161436360789278,0.0013592571729866547,0.0012149153702047217,0.0010670450800794224,0.0009196722200198741,0.0007902216502195621,0.0006941705138501165,0.0006327414479674267,0.0005921099674559293,0.0005532153182325369,0.0005036326329651855,0.00044278424679736975,0.0003782443744638655,0.0003180058394895808,0.0002655392152266931,0.0002205616924797977,0.00018297420224927158,0.00015529159914400844,0.0001411740060075115,0.00014154691871220577,0.00015183431578645262,0.00016281887493121882,0.0001648200202006178],"type":"scatter","hoverlabel":{"font":{"size":19}}},{"legendgroup":"Thick Lines","line":{"color":"#e28e8b","width":24},"marker":{"size":18,"symbol":"square"},"mode":"markers","name":"< 100","showlegend":true,"x":[null],"y":[null],"type":"scatter","hoverlabel":{"font":{"size":19}}},{"line":{"color":"#8fbbe4","width":24},"marker":{"size":18,"symbol":"square"},"mode":"markers","name":"> 100","showlegend":true,"x":[null],"y":[null],"type":"scatter","hoverlabel":{"font":{"size":19}}},{"hoverinfo":"skip","marker":{"color":"green","line":{"color":"black","width":3},"size":18,"symbol":"circle-dot"},"mode":"markers","name":"avg","showlegend":false,"x":[99.99982276497718],"y":[0.0],"type":"scatter","hoverlabel":{"font":{"size":19}}},{"hoverinfo":"skip","marker":{"color":"green","line":{"color":"black","width":3},"size":18,"symbol":"circle-dot"},"mode":"markers","name":"avg","x":[null],"y":[null],"type":"scatter","hoverlabel":{"font":{"size":19}}}],                        {"template":{"data":{"histogram2dcontour":[{"type":"histogram2dcontour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"choropleth":[{"type":"choropleth","colorbar":{"outlinewidth":0,"ticks":""}}],"histogram2d":[{"type":"histogram2d","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"heatmap":[{"type":"heatmap","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"heatmapgl":[{"type":"heatmapgl","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"contourcarpet":[{"type":"contourcarpet","colorbar":{"outlinewidth":0,"ticks":""}}],"contour":[{"type":"contour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"surface":[{"type":"surface","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"mesh3d":[{"type":"mesh3d","colorbar":{"outlinewidth":0,"ticks":""}}],"scatter":[{"fillpattern":{"fillmode":"overlay","size":10,"solidity":0.2},"type":"scatter"}],"parcoords":[{"type":"parcoords","line":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolargl":[{"type":"scatterpolargl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"scattergeo":[{"type":"scattergeo","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolar":[{"type":"scatterpolar","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"scattergl":[{"type":"scattergl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatter3d":[{"type":"scatter3d","line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattermapbox":[{"type":"scattermapbox","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterternary":[{"type":"scatterternary","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattercarpet":[{"type":"scattercarpet","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"type":"carpet"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}],"barpolar":[{"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"pie":[{"automargin":true,"type":"pie"}]},"layout":{"autotypenumbers":"strict","colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"hovermode":"closest","hoverlabel":{"align":"left"},"paper_bgcolor":"white","plot_bgcolor":"#E5ECF6","polar":{"bgcolor":"#E5ECF6","angularaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"radialaxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"ternary":{"bgcolor":"#E5ECF6","aaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"baxis":{"gridcolor":"white","linecolor":"white","ticks":""},"caxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]]},"xaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"yaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"scene":{"xaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"yaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"zaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"geo":{"bgcolor":"white","landcolor":"#E5ECF6","subunitcolor":"white","showland":true,"showlakes":true,"lakecolor":"white"},"title":{"x":0.05},"mapbox":{"style":"light"},"margin":{"b":0,"l":0,"r":0,"t":30}}},"margin":{"l":0,"r":0,"b":35,"t":35},"xaxis":{"tickfont":{"size":13},"tickformat":".2f","title":{"text":"Index-to-Control","font":{"size":15}},"zeroline":false,"tickangle":0,"tickvals":[99.5097840829096,100.00006835111651,100.49097167817824],"ticks":"inside","ticklen":6},"legend":{"font":{"size":15},"x":0.02},"autosize":true,"hovermode":"x","title":{"text":"Normal"},"yaxis":{"title":{"text":""},"visible":false,"showticklabels":false}},                        {"responsive": true}                    ).then(function(){
                            
var gd = document.getElementById('b9f75495-b0d9-43f7-8402-46c98b8fbe34');
var x = new MutationObserver(function (mutations, observer) {{
        var display = window.getComputedStyle(gd).display;
        if (!display || display === 'none') {{
            console.log([gd, 'removed!']);
            Plotly.purge(gd);
            observer.disconnect();
        }}
}});

// Listen for the removal of the full notebook cells
var notebookContainer = gd.closest('#notebook-container');
if (notebookContainer) {{
    x.observe(notebookContainer, {childList: true});
}}

// Listen for the clearing of the current output cell
var outputEl = gd.closest('.output');
if (outputEl) {{
    x.observe(outputEl, {childList: true});
}}

                        })                };                });            </script>        </div>
</div>
</div>
</section>
<section id="candidate-risk-thresholds" class="level2">
<h2 class="anchored" data-anchor-id="candidate-risk-thresholds">Candidate Risk Thresholds</h2>
<p>A risk threshold defines how much expected loss I’m willing to tolerate before stopping the test and declaring a winner. To explore tradeoffs between speed and accuracy, I simulate decisions using a range of candidate thresholds (e.g., 0.01%, 0.02%, …, 0.10%).</p>
<p>Each candidate represents a different level of risk tolerance: lower thresholds are more cautious, while higher ones allow for faster decisions with greater uncertainty.</p>
</section>
<section id="simulation-logic" class="level2">
<h2 class="anchored" data-anchor-id="simulation-logic">Simulation Logic</h2>
<ol type="1">
<li>For each simulation, and each day after <code>min(test_days)</code>:
<ul>
<li>Compute <strong>expected loss</strong> for both control and treatment conditions.</li>
<li>Compare each condition’s expected loss to the candidate risk threshold.</li>
</ul></li>
<li>Decision rules:
<ul>
<li>If <strong>only one</strong> condition breaches the threshold → select it as the winner.</li>
<li>If <strong>both</strong> breach → choose the condition with the <strong>lower risk</strong>.</li>
<li>If <strong>neither</strong> breaches by the end of the test → select the condition with the <strong>lowest final risk</strong>.</li>
</ul></li>
<li>After selecting a winner:
<ul>
<li>Simulate rolling out the winner to the <strong>remaining test population</strong> and the <strong>post-test population</strong>, regardless of whether it was truly best.</li>
</ul></li>
</ol>
<p>This process lets me estimate how each candidate risk threshold shapes <strong>decision quality</strong> and the resulting <strong>business value across the test and post-test populations</strong>.</p>
</section>
</section>
<section id="results" class="level1">
<h1>Results</h1>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>